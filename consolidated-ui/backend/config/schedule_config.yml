# Schedule Configuration - YAML ↔ PostgreSQL Sync
#
# This file is bidirectionally synced with PostgreSQL database.
# Changes made here are automatically synced to database.
# Changes made via API are automatically written back here.
#
# Sync Rules:
# - On startup: YAML → DB (conflicts stored for manual resolution)
# - On API update: DB → YAML (immediate write with file locking)
# - Cron job: YAML → DB every 5 minutes (safety net)
#
# File Format:
# - tasks: List of scheduled tasks
# - metadata: Sync metadata (last_sync timestamp, sync_source)

tasks:
  - id: 1
    skill_name: "daily-backup"
    schedule_cron: "0 2 * * *"  # 2 AM daily
    next_run_at: "2025-11-09T02:00:00"
    params_json:
      backup_type: "full"
      retention_days: 30
    status: "pending"
    user_id: "admin"
    created_at: "2025-11-08T18:00:00"
    updated_at: "2025-11-08T18:00:00"

  - id: 2
    skill_name: "hourly-health-check"
    schedule_cron: "0 * * * *"  # Every hour
    next_run_at: "2025-11-08T19:00:00"
    params_json:
      endpoints:
        - "/health"
        - "/api/status"
      alert_on_failure: true
    status: "pending"
    user_id: "system"
    created_at: "2025-11-08T18:00:00"
    updated_at: "2025-11-08T18:00:00"

  - id: 3
    skill_name: "weekly-report"
    schedule_cron: "0 9 * * 1"  # 9 AM every Monday
    next_run_at: "2025-11-11T09:00:00"
    params_json:
      report_type: "metrics"
      recipients:
        - "admin@example.com"
      format: "pdf"
    status: "pending"
    user_id: "admin"
    created_at: "2025-11-08T18:00:00"
    updated_at: "2025-11-08T18:00:00"

metadata:
  last_sync: "2025-11-08T18:00:00"
  sync_source: "manual"
  version: "1.0"
